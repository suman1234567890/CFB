/*
Copyright (c) 2012 jqWidgets.
http://jqwidgets.com/license/
*/

(function(a){a.extend(a.jqx._jqxGrid.prototype,{setcolumnresizable:function(b,c){this._setcolumnproperty(b,"resizable",text)},getcolumnresizable:function(b){return this._getcolumnproperty(b,"resizable")},_handlecolumnsresize:function(){var b=this;if(this.columnsresize){this.removeHandler(a(document),"mousemove.resize"+this.element.id);this.addHandler(a(document),"mousemove.resize"+this.element.id,function(i){if(b.resizablecolumn!=null&&!b.disabled&&b.resizing){if(b.resizeline!=null){var g=b.host.offset();var k=parseInt(b.resizestartline.offset().left);var f=k-b._startcolumnwidth;var l=b.resizablecolumn.column.minwidth;if(l=="auto"){l=0}else{l=parseInt(l)}var j=b.resizablecolumn.column.maxwidth;if(j=="auto"){j=0}else{j=parseInt(j)}f+=l;var h=j>0?k+j:0;var e=j==0?true:b._startcolumnwidth+i.pageX-k<j?true:false;if(e){if(i.pageX>=g.left&&i.pageX>=f&&i.pageX<=g.left+b.host.width()){if(h!=0&&i.pageX<h){b.resizeline.css("left",i.pageX)}else{if(h==0){b.resizeline.css("left",i.pageX)}}}}}}return false});this.removeHandler(a(document),"mousedown.resize"+this.element.id);this.addHandler(a(document),"mousedown.resize"+this.element.id,function(e){if(b.resizablecolumn!=null&&!b.disabled){b._startcolumnwidth=b.resizablecolumn.column.width;a(document.body).addClass("jqx-disableselect");b.resizing=true;b._resizecolumn=b.resizablecolumn.column;b.resizeline=b.resizeline||a('<div style="position: absolute;"></div>');b.resizestartline=b.resizestartline||a('<div style="position: absolute;"></div>');b.resizebackground=b.resizebackground||a('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>');b.resizebackground.css("opacity",0.01);b.resizebackground.css("cursor","col-resize");b.resizeline.css("cursor","col-resize");b.resizestartline.css("cursor","col-resize");b.resizeline.addClass(b.toThemeProperty("jqx-grid-column-resizeline"));b.resizestartline.addClass(b.toThemeProperty("jqx-grid-column-resizestartline"));a(document.body).append(b.resizeline);a(document.body).append(b.resizestartline);a(document.body).append(b.resizebackground);var f=b.resizablecolumn.columnelement.offset();b.resizebackground.css("left",b.host.offset().left);b.resizebackground.css("top",b.host.offset().top);b.resizebackground.width(b.host.width());b.resizebackground.height(b.host.height());b.resizebackground.css("z-index",999999999);var g=function(h){h.css("left",parseInt(f.left)+b._startcolumnwidth);var k=b._groupsheader();var j=k?b.groupsheader.height():0;var i=b.pageable?b.pagerdiv.height():0;var l=b.hScrollBar.css("visibility")=="visible"?17:0;h.css("top",parseInt(f.top));h.css("z-index",9999999999);h.height(b.host.height()-i-j-l);if(b.enableanimations){h.show("fast")}else{h.show()}};g(b.resizeline);g(b.resizestartline)}});var c=function(){a(document.body).removeClass("jqx-disableselect");b.resizing=false;if(b.disabled){return}if(b._resizecolumn!=null&&b.resizeline!=null&&b.resizeline.css("display")=="block"){var i=parseInt(b.resizeline.css("left"));var f=parseInt(b.resizestartline.css("left"));var e=b._startcolumnwidth+i-f;var h=b._resizecolumn.width;b._closemenu();b._resizecolumn.width=e;b._updatecolumnwidths();b._updatecellwidths();b._raiseEvent(14,{columntext:b._resizecolumn.text,column:b._resizecolumn.datafield,oldwidth:h,newwidth:e});var g=b.groups.length;if(b.groupable&&g>0||b.rowdetails){b._renderrows(b.virtualsizeinfo)}b._resizecolumn=null;b.resizeline.hide();b.resizestartline.hide();b.resizebackground.remove()}b.resizablecolumn=null};if(window.frameElement){if(window.top!=null){var d=function(e){c()};if(window.top.document.addEventListener){window.top.document.addEventListener("mouseup",d,false)}else{if(window.top.document.attachEvent){window.top.document.attachEvent("onmouseup",d)}}}}this.removeHandler(a(document),"mouseup.resize"+this.element.id);this.addHandler(a(document),"mouseup.resize"+this.element.id,function(e){c()})}}})})(jQuery);